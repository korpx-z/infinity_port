{"version":3,"file":"Alert.js","sources":["../../../../src/components/Alert/Alert.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React, { AriaRole, HTMLAttributes, ReactNode } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { useTheme2 } from '../../themes';\nimport { IconName } from '../../types/icon';\nimport { Button } from '../Button/Button';\nimport { Icon } from '../Icon/Icon';\nimport { IconButton } from '../IconButton/IconButton';\n\nexport type AlertVariant = 'success' | 'warning' | 'error' | 'info';\n\nexport interface Props extends HTMLAttributes<HTMLDivElement> {\n  title: string;\n  /** On click handler for alert button, mostly used for dismissing the alert */\n  onRemove?: (event: React.MouseEvent) => void;\n  severity?: AlertVariant;\n  children?: ReactNode;\n  elevated?: boolean;\n  buttonContent?: React.ReactNode | string;\n  bottomSpacing?: number;\n  topSpacing?: number;\n}\n\nexport const Alert = React.forwardRef<HTMLDivElement, Props>(\n  (\n    {\n      title,\n      onRemove,\n      children,\n      buttonContent,\n      elevated,\n      bottomSpacing,\n      topSpacing,\n      className,\n      severity = 'error',\n      ...restProps\n    },\n    ref\n  ) => {\n    const theme = useTheme2();\n    const hasTitle = Boolean(title);\n    const styles = getStyles(theme, severity, hasTitle, elevated, bottomSpacing, topSpacing);\n    const rolesBySeverity: Record<AlertVariant, AriaRole> = {\n      error: 'alert',\n      warning: 'alert',\n      info: 'status',\n      success: 'status',\n    };\n    const role = restProps['role'] || rolesBySeverity[severity];\n    const ariaLabel = restProps['aria-label'] || title;\n\n    return (\n      <div\n        ref={ref}\n        className={cx(styles.alert, className)}\n        data-testid={selectors.components.Alert.alertV2(severity)}\n        role={role}\n        aria-label={ariaLabel}\n        {...restProps}\n      >\n        <div className={styles.icon}>\n          <Icon size=\"xl\" name={getIconFromSeverity(severity)} />\n        </div>\n\n        <div className={styles.body}>\n          <div className={styles.title}>{title}</div>\n          {children && <div className={styles.content}>{children}</div>}\n        </div>\n\n        {/* If onRemove is specified, giving preference to onRemove */}\n        {onRemove && !buttonContent && (\n          <div className={styles.close}>\n            <IconButton aria-label=\"Close alert\" name=\"times\" onClick={onRemove} size=\"lg\" type=\"button\" />\n          </div>\n        )}\n\n        {onRemove && buttonContent && (\n          <div className={styles.buttonWrapper}>\n            <Button aria-label=\"Close alert\" variant=\"secondary\" onClick={onRemove} type=\"button\">\n              {buttonContent}\n            </Button>\n          </div>\n        )}\n      </div>\n    );\n  }\n);\n\nAlert.displayName = 'Alert';\n\nexport const getIconFromSeverity = (severity: AlertVariant): IconName => {\n  switch (severity) {\n    case 'error':\n    case 'warning':\n      return 'exclamation-triangle';\n    case 'info':\n      return 'info-circle';\n    case 'success':\n      return 'check';\n  }\n};\n\nconst getStyles = (\n  theme: GrafanaTheme2,\n  severity: AlertVariant,\n  hasTitle: boolean,\n  elevated?: boolean,\n  bottomSpacing?: number,\n  topSpacing?: number\n) => {\n  const color = theme.colors[severity];\n  const borderRadius = theme.shape.borderRadius();\n\n  return {\n    alert: css`\n      flex-grow: 1;\n      position: relative;\n      border-radius: ${borderRadius};\n      display: flex;\n      flex-direction: row;\n      align-items: stretch;\n      background: ${theme.colors.background.secondary};\n      box-shadow: ${elevated ? theme.shadows.z3 : theme.shadows.z1};\n      margin-bottom: ${theme.spacing(bottomSpacing ?? 2)};\n      margin-top: ${theme.spacing(topSpacing ?? 0)};\n\n      &:before {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        bottom: 0;\n        right: 0;\n        background: ${theme.colors.background.primary};\n        z-index: -1;\n      }\n    `,\n    icon: css`\n      padding: ${theme.spacing(2, 3)};\n      background: ${color.main};\n      border-radius: ${borderRadius} 0 0 ${borderRadius};\n      color: ${color.contrastText};\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    `,\n    title: css`\n      font-weight: ${theme.typography.fontWeightMedium};\n      color: ${theme.colors.text.primary};\n    `,\n    body: css`\n      color: ${theme.colors.text.secondary};\n      padding: ${theme.spacing(2)};\n      flex-grow: 1;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      overflow-wrap: break-word;\n      word-break: break-word;\n    `,\n    content: css`\n      color: ${theme.colors.text.secondary};\n      padding-top: ${hasTitle ? theme.spacing(1) : 0};\n      max-height: 50vh;\n      overflow-y: auto;\n    `,\n    buttonWrapper: css`\n      padding: ${theme.spacing(1)};\n      background: none;\n      display: flex;\n      align-items: center;\n    `,\n    close: css`\n      padding: ${theme.spacing(2, 1)};\n      background: none;\n      display: flex;\n    `,\n  };\n};\n"],"names":["React"],"mappings":"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"}