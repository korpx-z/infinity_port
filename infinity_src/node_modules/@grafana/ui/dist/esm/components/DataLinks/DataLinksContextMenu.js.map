{"version":3,"file":"DataLinksContextMenu.js","sources":["../../../../src/components/DataLinks/DataLinksContextMenu.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { CSSProperties } from 'react';\n\nimport { LinkModel } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { linkModelToContextMenuItems } from '../../utils/dataLinks';\nimport { WithContextMenu } from '../ContextMenu/WithContextMenu';\nimport { MenuGroup, MenuItemsGroup } from '../Menu/MenuGroup';\nimport { MenuItem } from '../Menu/MenuItem';\n\nexport interface DataLinksContextMenuProps {\n  children: (props: DataLinksContextMenuApi) => JSX.Element;\n  links: () => LinkModel[];\n  style?: CSSProperties;\n}\n\nexport interface DataLinksContextMenuApi {\n  openMenu?: React.MouseEventHandler<HTMLOrSVGElement>;\n  targetClassName?: string;\n}\n\nexport const DataLinksContextMenu = ({ children, links, style }: DataLinksContextMenuProps) => {\n  const itemsGroup: MenuItemsGroup[] = [{ items: linkModelToContextMenuItems(links), label: 'Data links' }];\n  const linksCounter = itemsGroup[0].items.length;\n  const renderMenuGroupItems = () => {\n    return itemsGroup.map((group, index) => (\n      <MenuGroup key={`${group.label}${index}`} label={group.label}>\n        {(group.items || []).map((item) => (\n          <MenuItem\n            key={item.label}\n            url={item.url}\n            label={item.label}\n            target={item.target}\n            icon={item.icon}\n            active={item.active}\n            onClick={item.onClick}\n          />\n        ))}\n      </MenuGroup>\n    ));\n  };\n\n  // Use this class name (exposed via render prop) to add context menu indicator to the click target of the visualization\n  const targetClassName = css`\n    cursor: context-menu;\n  `;\n\n  if (linksCounter > 1) {\n    return (\n      <WithContextMenu renderMenuItems={renderMenuGroupItems}>\n        {({ openMenu }) => {\n          return children({ openMenu, targetClassName });\n        }}\n      </WithContextMenu>\n    );\n  } else {\n    const linkModel = links()[0];\n    return (\n      <a\n        href={linkModel.href}\n        onClick={linkModel.onClick}\n        target={linkModel.target}\n        title={linkModel.title}\n        style={{ ...style, overflow: 'hidden', display: 'flex' }}\n        aria-label={selectors.components.DataLinksContextMenu.singleLink}\n      >\n        {children({})}\n      </a>\n    );\n  }\n};\n"],"names":["React"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAsBO,MAAM,uBAAuB,CAAC,EAAE,QAAU,EAAA,KAAA,EAAO,OAAuC,KAAA;AAC7F,EAAM,MAAA,UAAA,GAA+B,CAAC,EAAE,KAAA,EAAO,4BAA4B,KAAK,CAAA,EAAG,KAAO,EAAA,YAAA,EAAc,CAAA,CAAA;AACxG,EAAA,MAAM,YAAe,GAAA,UAAA,CAAW,CAAC,CAAA,CAAE,KAAM,CAAA,MAAA,CAAA;AACzC,EAAA,MAAM,uBAAuB,MAAM;AACjC,IAAO,OAAA,UAAA,CAAW,IAAI,CAAC,KAAA,EAAO,0BAC3BA,cAAA,CAAA,aAAA,CAAA,SAAA,EAAA,EAAU,KAAK,CAAG,EAAA,KAAA,CAAM,QAAQ,KAAS,CAAA,CAAA,EAAA,KAAA,EAAO,MAAM,KACnD,EAAA,EAAA,CAAA,KAAA,CAAM,SAAS,EAAC,EAAG,GAAI,CAAA,CAAC,IACxB,qBAAAA,cAAA,CAAA,aAAA;AAAA,MAAC,QAAA;AAAA,MAAA;AAAA,QACC,KAAK,IAAK,CAAA,KAAA;AAAA,QACV,KAAK,IAAK,CAAA,GAAA;AAAA,QACV,OAAO,IAAK,CAAA,KAAA;AAAA,QACZ,QAAQ,IAAK,CAAA,MAAA;AAAA,QACb,MAAM,IAAK,CAAA,IAAA;AAAA,QACX,QAAQ,IAAK,CAAA,MAAA;AAAA,QACb,SAAS,IAAK,CAAA,OAAA;AAAA,OAAA;AAAA,KAEjB,CACH,CACD,CAAA,CAAA;AAAA,GACH,CAAA;AAGA,EAAA,MAAM,eAAkB,GAAA,GAAA,CAAA;AAAA;AAAA,EAAA,CAAA,CAAA;AAIxB,EAAA,IAAI,eAAe,CAAG,EAAA;AACpB,IAAA,oDACG,eAAgB,EAAA,EAAA,eAAA,EAAiB,wBAC/B,CAAC,EAAE,UAAe,KAAA;AACjB,MAAA,OAAO,QAAS,CAAA,EAAE,QAAU,EAAA,eAAA,EAAiB,CAAA,CAAA;AAAA,KAEjD,CAAA,CAAA;AAAA,GAEG,MAAA;AACL,IAAM,MAAA,SAAA,GAAY,KAAM,EAAA,CAAE,CAAC,CAAA,CAAA;AAC3B,IACE,uBAAAA,cAAA,CAAA,aAAA;AAAA,MAAC,GAAA;AAAA,MAAA;AAAA,QACC,MAAM,SAAU,CAAA,IAAA;AAAA,QAChB,SAAS,SAAU,CAAA,OAAA;AAAA,QACnB,QAAQ,SAAU,CAAA,MAAA;AAAA,QAClB,OAAO,SAAU,CAAA,KAAA;AAAA,QACjB,OAAO,aAAK,CAAA,cAAA,CAAA,EAAA,EAAA,KAAA,CAAA,EAAL,EAAY,QAAU,EAAA,QAAA,EAAU,SAAS,MAAO,EAAA,CAAA;AAAA,QACvD,YAAA,EAAY,SAAU,CAAA,UAAA,CAAW,oBAAqB,CAAA,UAAA;AAAA,OAAA;AAAA,MAErD,QAAA,CAAS,EAAE,CAAA;AAAA,KACd,CAAA;AAAA,GAEJ;AACF;;;;"}