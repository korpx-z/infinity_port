{"version":3,"file":"ButtonSelect.js","sources":["../../../../src/components/Dropdown/ButtonSelect.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport { useButton } from '@react-aria/button';\nimport { FocusScope } from '@react-aria/focus';\nimport { useMenuTrigger } from '@react-aria/menu';\nimport { useMenuTriggerState } from '@react-stately/menu';\nimport React, { HTMLAttributes } from 'react';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes/ThemeContext';\nimport { ButtonGroup } from '../Button';\nimport { ClickOutsideWrapper } from '../ClickOutsideWrapper/ClickOutsideWrapper';\nimport { Menu } from '../Menu/Menu';\nimport { MenuItem } from '../Menu/MenuItem';\nimport { ToolbarButton, ToolbarButtonVariant } from '../ToolbarButton';\nimport { PopoverContent } from '../Tooltip';\n\nexport interface Props<T> extends HTMLAttributes<HTMLButtonElement> {\n  className?: string;\n  options: Array<SelectableValue<T>>;\n  value?: SelectableValue<T>;\n  onChange: (item: SelectableValue<T>) => void;\n  tooltipContent?: PopoverContent;\n  narrow?: boolean;\n  variant?: ToolbarButtonVariant;\n}\n\n/**\n * @internal\n * A temporary component until we have a proper dropdown component\n */\nconst ButtonSelectComponent = <T,>(props: Props<T>) => {\n  const { className, options, value, onChange, narrow, variant, ...restProps } = props;\n  const styles = useStyles2(getStyles);\n  const state = useMenuTriggerState({});\n\n  const ref = React.useRef(null);\n  const { menuTriggerProps, menuProps } = useMenuTrigger({}, state, ref);\n  const { buttonProps } = useButton(menuTriggerProps, ref);\n\n  const onChangeInternal = (item: SelectableValue<T>) => {\n    onChange(item);\n    state.close();\n  };\n\n  return (\n    <ButtonGroup className={styles.wrapper}>\n      <ToolbarButton\n        className={className}\n        isOpen={state.isOpen}\n        narrow={narrow}\n        variant={variant}\n        ref={ref}\n        {...buttonProps}\n        {...restProps}\n      >\n        {value?.label || (value?.value != null ? String(value?.value) : null)}\n      </ToolbarButton>\n      {state.isOpen && (\n        <div className={styles.menuWrapper}>\n          <ClickOutsideWrapper onClick={state.close} parent={document} includeButtonPress={false}>\n            <FocusScope contain autoFocus restoreFocus>\n              {/*\n                tabIndex=-1 is needed here to support highlighting text within the menu when using FocusScope\n                see https://github.com/adobe/react-spectrum/issues/1604#issuecomment-781574668\n              */}\n              <Menu tabIndex={-1} onClose={state.close} {...menuProps}>\n                {options.map((item) => (\n                  <MenuItem\n                    key={`${item.value}`}\n                    label={item.label ?? String(item.value)}\n                    onClick={() => onChangeInternal(item)}\n                    active={item.value === value?.value}\n                    ariaChecked={item.value === value?.value}\n                    ariaLabel={item.ariaLabel || item.label}\n                    role=\"menuitemradio\"\n                  />\n                ))}\n              </Menu>\n            </FocusScope>\n          </ClickOutsideWrapper>\n        </div>\n      )}\n    </ButtonGroup>\n  );\n};\n\nButtonSelectComponent.displayName = 'ButtonSelect';\n\nexport const ButtonSelect = React.memo(ButtonSelectComponent) as typeof ButtonSelectComponent;\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    wrapper: css`\n      position: relative;\n      display: inline-flex;\n    `,\n    menuWrapper: css`\n      position: absolute;\n      z-index: ${theme.zIndex.dropdown};\n      top: ${theme.spacing(4)};\n      right: 0;\n    `,\n  };\n};\n"],"names":["React","_a"],"mappings":"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"}