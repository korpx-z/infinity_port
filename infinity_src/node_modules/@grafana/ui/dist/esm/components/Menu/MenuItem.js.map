{"version":3,"file":"MenuItem.js","sources":["../../../../src/components/Menu/MenuItem.tsx"],"sourcesContent":["import { css, cx } from '@emotion/css';\nimport React, { ReactElement, useCallback, useState, useRef, useImperativeHandle, CSSProperties } from 'react';\n\nimport { GrafanaTheme2, LinkTarget } from '@grafana/data';\n\nimport { useStyles2 } from '../../themes';\nimport { getFocusStyles } from '../../themes/mixins';\nimport { IconName } from '../../types';\nimport { Icon } from '../Icon/Icon';\n\nimport { SubMenu } from './SubMenu';\n\n/** @internal */\nexport type MenuItemElement = HTMLAnchorElement & HTMLButtonElement & HTMLDivElement;\n\n/** @internal */\nexport interface MenuItemProps<T = any> {\n  /** Label of the menu item */\n  label: string;\n  /** Aria label for accessibility support */\n  ariaLabel?: string;\n  /** Aria checked for accessibility support */\n  ariaChecked?: boolean;\n  /** Target of the menu item (i.e. new window)  */\n  target?: LinkTarget;\n  /** Icon of the menu item */\n  icon?: IconName;\n  /** Role of the menu item */\n  role?: string;\n  /** Url of the menu item */\n  url?: string;\n  /** Handler for the click behaviour */\n  onClick?: (event: React.MouseEvent<HTMLElement>, payload?: T) => void;\n  /** Custom MenuItem styles*/\n  className?: string;\n  /** Active */\n  active?: boolean;\n  /** Disabled */\n  disabled?: boolean;\n  /** Show in destructive style (error color) */\n  destructive?: boolean;\n  tabIndex?: number;\n  /** List of menu items for the subMenu */\n  childItems?: Array<ReactElement<MenuItemProps>>;\n  /** Custom style for SubMenu */\n  customSubMenuContainerStyles?: CSSProperties;\n  /** Shortcut key combination */\n  shortcut?: string;\n  /** Test id for e2e tests and fullstory*/\n  testId?: string;\n}\n\n/** @internal */\nexport const MenuItem = React.memo(\n  React.forwardRef<MenuItemElement, MenuItemProps>((props, ref) => {\n    const {\n      url,\n      icon,\n      label,\n      ariaLabel,\n      ariaChecked,\n      target,\n      onClick,\n      className,\n      active,\n      disabled,\n      destructive,\n      childItems,\n      role = 'menuitem',\n      tabIndex = -1,\n      customSubMenuContainerStyles,\n      shortcut,\n      testId,\n    } = props;\n    const styles = useStyles2(getStyles);\n    const [isActive, setIsActive] = useState(active);\n    const [isSubMenuOpen, setIsSubMenuOpen] = useState(false);\n    const [openedWithArrow, setOpenedWithArrow] = useState(false);\n    const onMouseEnter = useCallback(() => {\n      if (disabled) {\n        return;\n      }\n\n      setIsSubMenuOpen(true);\n      setIsActive(true);\n    }, [disabled]);\n    const onMouseLeave = useCallback(() => {\n      if (disabled) {\n        return;\n      }\n\n      setIsSubMenuOpen(false);\n      setIsActive(false);\n    }, [disabled]);\n\n    const hasSubMenu = childItems && childItems.length > 0;\n    const ItemElement = hasSubMenu ? 'div' : url === undefined ? 'button' : 'a';\n    const itemStyle = cx(\n      {\n        [styles.item]: true,\n        [styles.active]: isActive,\n        [styles.disabled]: disabled,\n        [styles.destructive]: destructive && !disabled,\n      },\n      className\n    );\n    const disabledProps = {\n      [ItemElement === 'button' ? 'disabled' : 'aria-disabled']: disabled,\n      ...(ItemElement === 'a' && disabled && { href: undefined, onClick: undefined }),\n      ...(disabled && {\n        tabIndex: -1,\n        ['data-disabled']: disabled, // used to identify disabled items in Menu.tsx\n      }),\n    };\n\n    const localRef = useRef<MenuItemElement>(null);\n    useImperativeHandle(ref, () => localRef.current!);\n\n    const handleKeys = (event: React.KeyboardEvent) => {\n      switch (event.key) {\n        case 'ArrowRight':\n          event.preventDefault();\n          event.stopPropagation();\n          if (hasSubMenu) {\n            setIsSubMenuOpen(true);\n            setOpenedWithArrow(true);\n            setIsActive(true);\n          }\n          break;\n        default:\n          break;\n      }\n    };\n\n    const closeSubMenu = () => {\n      setIsSubMenuOpen(false);\n      setIsActive(false);\n      localRef?.current?.focus();\n    };\n\n    const hasShortcut = Boolean(shortcut && shortcut.length > 0);\n\n    return (\n      <ItemElement\n        target={target}\n        className={itemStyle}\n        rel={target === '_blank' ? 'noopener noreferrer' : undefined}\n        href={url}\n        onClick={onClick}\n        onMouseEnter={onMouseEnter}\n        onMouseLeave={onMouseLeave}\n        onKeyDown={handleKeys}\n        role={url === undefined ? role : undefined}\n        data-role=\"menuitem\" // used to identify menuitem in Menu.tsx\n        ref={localRef}\n        data-testid={testId}\n        aria-label={ariaLabel}\n        aria-checked={ariaChecked}\n        tabIndex={tabIndex}\n        {...disabledProps}\n      >\n        <>\n          {icon && <Icon name={icon} className={styles.icon} aria-hidden />}\n          {label}\n\n          <div className={cx(styles.rightWrapper, { [styles.withShortcut]: hasShortcut })}>\n            {hasShortcut && (\n              <div className={styles.shortcut}>\n                <Icon name=\"keyboard\" aria-hidden />\n                {shortcut}\n              </div>\n            )}\n            {hasSubMenu && (\n              <SubMenu\n                items={childItems}\n                isOpen={isSubMenuOpen}\n                openedWithArrow={openedWithArrow}\n                setOpenedWithArrow={setOpenedWithArrow}\n                close={closeSubMenu}\n                customStyle={customSubMenuContainerStyles}\n              />\n            )}\n          </div>\n        </>\n      </ItemElement>\n    );\n  })\n);\n\nMenuItem.displayName = 'MenuItem';\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    item: css`\n      background: none;\n      cursor: pointer;\n      white-space: nowrap;\n      color: ${theme.colors.text.primary};\n      display: flex;\n      align-items: center;\n      padding: ${theme.spacing(0.5, 2)};\n      min-height: ${theme.spacing(4)};\n      margin: 0;\n      border: none;\n      width: 100%;\n      position: relative;\n\n      &:hover,\n      &:focus,\n      &:focus-visible {\n        background: ${theme.colors.action.hover};\n        color: ${theme.colors.text.primary};\n        text-decoration: none;\n      }\n\n      &:focus-visible {\n        ${getFocusStyles(theme)}\n      }\n    `,\n    active: css`\n      background: ${theme.colors.action.hover};\n    `,\n    destructive: css`\n      color: ${theme.colors.error.text};\n\n      svg {\n        color: ${theme.colors.error.text};\n      }\n\n      &:hover,\n      &:focus,\n      &:focus-visible {\n        background: ${theme.colors.error.main};\n        color: ${theme.colors.error.contrastText};\n\n        svg {\n          color: ${theme.colors.error.contrastText};\n        }\n      }\n    `,\n    disabled: css`\n      color: ${theme.colors.action.disabledText};\n\n      &:hover,\n      &:focus,\n      &:focus-visible {\n        cursor: not-allowed;\n        background: none;\n        color: ${theme.colors.action.disabledText};\n      }\n    `,\n    icon: css`\n      opacity: 0.7;\n      margin-right: 10px;\n      margin-left: -4px;\n      color: ${theme.colors.text.secondary};\n    `,\n    rightWrapper: css`\n      display: flex;\n      align-items: center;\n      margin-left: auto;\n    `,\n    shortcutIcon: css`\n      margin-right: ${theme.spacing(1)};\n    `,\n    withShortcut: css`\n      min-width: ${theme.spacing(10.5)};\n    `,\n    shortcut: css`\n      display: flex;\n      align-items: center;\n      gap: ${theme.spacing(1)};\n      margin-left: ${theme.spacing(2)};\n      color: ${theme.colors.text.secondary};\n      opacity: 0.7;\n    `,\n  };\n};\n"],"names":["React"],"mappings":"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"}