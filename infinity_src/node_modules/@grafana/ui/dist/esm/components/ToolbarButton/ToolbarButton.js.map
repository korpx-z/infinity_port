{"version":3,"file":"ToolbarButton.js","sources":["../../../../src/components/ToolbarButton/ToolbarButton.tsx"],"sourcesContent":["import { cx, css } from '@emotion/css';\nimport React, { forwardRef, ButtonHTMLAttributes } from 'react';\n\nimport { GrafanaTheme2, IconName, isIconName } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { styleMixins, useStyles2 } from '../../themes';\nimport { getFocusStyles, getMouseFocusStyles } from '../../themes/mixins';\nimport { IconSize } from '../../types/icon';\nimport { getPropertiesForVariant } from '../Button';\nimport { Icon } from '../Icon/Icon';\nimport { Tooltip } from '../Tooltip';\n\ntype CommonProps = {\n  /** Icon name */\n  icon?: IconName | React.ReactNode;\n  /** Icon size */\n  iconSize?: IconSize;\n  /** Tooltip */\n  tooltip?: string;\n  /** For image icons */\n  imgSrc?: string;\n  /** Alt text for imgSrc */\n  imgAlt?: string;\n  /** if true or false will show angle-down/up */\n  isOpen?: boolean;\n  /** Controls flex-grow: 1 */\n  fullWidth?: boolean;\n  /** reduces padding to xs */\n  narrow?: boolean;\n  /** variant */\n  variant?: ToolbarButtonVariant;\n  /** Hide any children and only show icon */\n  iconOnly?: boolean;\n  /** Show highlight dot */\n  isHighlighted?: boolean;\n};\n\nexport type ToolbarButtonProps = CommonProps & ButtonHTMLAttributes<HTMLButtonElement>;\n\nexport type ToolbarButtonVariant = 'default' | 'primary' | 'destructive' | 'active' | 'canvas';\n\nexport const ToolbarButton = forwardRef<HTMLButtonElement, ToolbarButtonProps>(\n  (\n    {\n      tooltip,\n      icon,\n      iconSize,\n      className,\n      children,\n      imgSrc,\n      imgAlt,\n      fullWidth,\n      isOpen,\n      narrow,\n      variant = 'default',\n      iconOnly,\n      'aria-label': ariaLabel,\n      isHighlighted,\n      ...rest\n    },\n    ref\n  ) => {\n    const styles = useStyles2(getStyles);\n\n    const buttonStyles = cx(\n      {\n        [styles.button]: true,\n        [styles.buttonFullWidth]: fullWidth,\n        [styles.narrow]: narrow,\n      },\n      styles[variant],\n      className\n    );\n\n    const contentStyles = cx({\n      [styles.content]: true,\n      [styles.contentWithIcon]: !!icon,\n      [styles.contentWithRightIcon]: isOpen !== undefined,\n    });\n\n    const body = (\n      <button\n        ref={ref}\n        className={buttonStyles}\n        aria-label={getButtonAriaLabel(ariaLabel, tooltip)}\n        aria-expanded={isOpen}\n        {...rest}\n      >\n        {renderIcon(icon, iconSize)}\n        {imgSrc && <img className={styles.img} src={imgSrc} alt={imgAlt ?? ''} />}\n        {children && !iconOnly && <div className={contentStyles}>{children}</div>}\n        {isOpen === false && <Icon name=\"angle-down\" />}\n        {isOpen === true && <Icon name=\"angle-up\" />}\n        {isHighlighted && <div className={styles.highlight} />}\n      </button>\n    );\n\n    return tooltip ? (\n      <Tooltip content={tooltip} placement=\"bottom\">\n        {body}\n      </Tooltip>\n    ) : (\n      body\n    );\n  }\n);\n\nToolbarButton.displayName = 'ToolbarButton';\n\nfunction getButtonAriaLabel(ariaLabel: string | undefined, tooltip: string | undefined) {\n  return ariaLabel ? ariaLabel : tooltip ? selectors.components.PageToolbar.item(tooltip) : undefined;\n}\n\nfunction renderIcon(icon: IconName | React.ReactNode, iconSize?: IconSize) {\n  if (!icon) {\n    return null;\n  }\n\n  if (isIconName(icon)) {\n    return <Icon name={icon} size={`${iconSize ? iconSize : 'lg'}`} />;\n  }\n\n  return icon;\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  const primaryVariant = getPropertiesForVariant(theme, 'primary', 'solid');\n  const destructiveVariant = getPropertiesForVariant(theme, 'destructive', 'solid');\n\n  const defaultOld = css`\n    color: ${theme.colors.text.secondary};\n    background-color: ${theme.colors.background.primary};\n\n    &:hover {\n      color: ${theme.colors.text.primary};\n      background: ${theme.colors.background.secondary};\n    }\n  `;\n\n  const defaultTopNav = css`\n    color: ${theme.colors.text.secondary};\n    background: transparent;\n    border: 1px solid transparent;\n\n    &:hover {\n      color: ${theme.colors.text.primary};\n      background: ${theme.colors.background.secondary};\n    }\n  `;\n\n  return {\n    button: css`\n      label: toolbar-button;\n      position: relative;\n      display: flex;\n      align-items: center;\n      height: ${theme.spacing(theme.components.height.md)};\n      padding: ${theme.spacing(0, 1)};\n      border-radius: ${theme.shape.borderRadius()};\n      line-height: ${theme.components.height.md * theme.spacing.gridSize - 2}px;\n      font-weight: ${theme.typography.fontWeightMedium};\n      border: 1px solid ${theme.colors.border.weak};\n      white-space: nowrap;\n      transition: ${theme.transitions.create(['background', 'box-shadow', 'border-color', 'color'], {\n        duration: theme.transitions.duration.short,\n      })};\n\n      &:focus,\n      &:focus-visible {\n        ${getFocusStyles(theme)}\n        z-index: 1;\n      }\n\n      &:focus:not(:focus-visible) {\n        ${getMouseFocusStyles(theme)}\n      }\n\n      &:hover {\n        box-shadow: ${theme.shadows.z1};\n      }\n\n      &[disabled],\n      &:disabled {\n        cursor: not-allowed;\n        opacity: ${theme.colors.action.disabledOpacity};\n        background: ${theme.colors.action.disabledBackground};\n        box-shadow: none;\n\n        &:hover {\n          color: ${theme.colors.text.disabled};\n          background: ${theme.colors.action.disabledBackground};\n          box-shadow: none;\n        }\n      }\n    `,\n    default: theme.flags.topnav ? defaultTopNav : defaultOld,\n    canvas: defaultOld,\n    active: css`\n      color: ${theme.v1.palette.orangeDark};\n      border-color: ${theme.v1.palette.orangeDark};\n      background-color: transparent;\n\n      &:hover {\n        color: ${theme.colors.text.primary};\n        background: ${theme.colors.emphasize(theme.colors.background.canvas, 0.03)};\n      }\n    `,\n    primary: css(primaryVariant),\n    destructive: css(destructiveVariant),\n    narrow: css`\n      padding: 0 ${theme.spacing(0.5)};\n    `,\n    img: css`\n      width: 16px;\n      height: 16px;\n      margin-right: ${theme.spacing(1)};\n    `,\n    buttonFullWidth: css`\n      flex-grow: 1;\n    `,\n    content: css`\n      flex-grow: 1;\n    `,\n    contentWithIcon: css`\n      display: none;\n      padding-left: ${theme.spacing(1)};\n\n      @media ${styleMixins.mediaUp(theme.v1.breakpoints.md)} {\n        display: block;\n      }\n    `,\n    contentWithRightIcon: css`\n      padding-right: ${theme.spacing(0.5)};\n    `,\n    highlight: css`\n      background-color: ${theme.colors.success.main};\n      border-radius: 50%;\n      width: 6px;\n      height: 6px;\n      position: absolute;\n      top: -3px;\n      right: -3px;\n      z-index: 1;\n    `,\n  };\n};\n"],"names":["React","styleMixins.mediaUp"],"mappings":"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"}