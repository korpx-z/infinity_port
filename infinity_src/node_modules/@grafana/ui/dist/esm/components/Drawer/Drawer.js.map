{"version":3,"file":"Drawer.js","sources":["../../../../src/components/Drawer/Drawer.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport { useDialog } from '@react-aria/dialog';\nimport { FocusScope } from '@react-aria/focus';\nimport { useOverlay } from '@react-aria/overlays';\nimport RcDrawer from 'rc-drawer';\nimport React, { CSSProperties, ReactNode, useState, useEffect } from 'react';\n\nimport { GrafanaTheme2 } from '@grafana/data';\nimport { selectors } from '@grafana/e2e-selectors';\n\nimport { useStyles2 } from '../../themes';\nimport { CustomScrollbar } from '../CustomScrollbar/CustomScrollbar';\nimport { IconButton } from '../IconButton/IconButton';\n\nexport interface Props {\n  children: ReactNode;\n  /** Title shown at the top of the drawer */\n  title?: ReactNode;\n  /** Subtitle shown below the title */\n  subtitle?: ReactNode;\n  /** Should the Drawer be closable by clicking on the mask, defaults to true */\n  closeOnMaskClick?: boolean;\n  /** Render the drawer inside a container on the page */\n  inline?: boolean;\n  /** Either a number in px or a string with unit postfix */\n  width?: number | string;\n  /** Should the Drawer be expandable to full width */\n  expandable?: boolean;\n  /** Tabs */\n  tabs?: React.ReactNode;\n  /** Set to true if the component rendered within in drawer content has its own scroll */\n  scrollableContent?: boolean;\n  /** Callback for closing the drawer */\n  onClose: () => void;\n}\n\nexport function Drawer({\n  children,\n  inline = false,\n  onClose,\n  closeOnMaskClick = true,\n  scrollableContent = false,\n  title,\n  subtitle,\n  width = '40%',\n  expandable = false,\n  tabs,\n}: Props) {\n  const drawerStyles = useStyles2(getStyles);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [isOpen, setIsOpen] = useState(false);\n  const currentWidth = isExpanded ? '100%' : width;\n  const overlayRef = React.useRef(null);\n  const { dialogProps, titleProps } = useDialog({}, overlayRef);\n  const { overlayProps } = useOverlay(\n    {\n      isDismissable: false,\n      isOpen,\n      onClose,\n    },\n    overlayRef\n  );\n\n  // RcDrawer v4.x needs to be mounted in advance for animations to play.\n  useEffect(() => {\n    setIsOpen(true);\n  }, []);\n\n  const content = <div className={drawerStyles.content}>{children}</div>;\n  const style: CSSProperties = {};\n  if (inline) {\n    style.position = 'absolute';\n  }\n\n  return (\n    <RcDrawer\n      open={isOpen}\n      onClose={onClose}\n      placement=\"right\"\n      width={currentWidth}\n      getContainer={inline ? undefined : 'body'}\n      style={style}\n      className={drawerStyles.drawerContent}\n      rootClassName={drawerStyles.drawer}\n      motion={{\n        motionAppear: true,\n        motionName: drawerStyles.drawerMotion,\n      }}\n      maskClassName={drawerStyles.mask}\n      maskClosable={closeOnMaskClick}\n      maskMotion={{\n        motionAppear: true,\n        motionName: drawerStyles.maskMotion,\n      }}\n    >\n      <FocusScope restoreFocus contain autoFocus>\n        <div\n          aria-label={\n            typeof title === 'string'\n              ? selectors.components.Drawer.General.title(title)\n              : selectors.components.Drawer.General.title('no title')\n          }\n          className={drawerStyles.container}\n          {...overlayProps}\n          {...dialogProps}\n          ref={overlayRef}\n        >\n          {typeof title === 'string' && (\n            <div className={drawerStyles.header}>\n              <div className={drawerStyles.actions}>\n                {expandable && !isExpanded && (\n                  <IconButton\n                    name=\"angle-left\"\n                    size=\"xl\"\n                    onClick={() => setIsExpanded(true)}\n                    aria-label={selectors.components.Drawer.General.expand}\n                  />\n                )}\n                {expandable && isExpanded && (\n                  <IconButton\n                    name=\"angle-right\"\n                    size=\"xl\"\n                    onClick={() => setIsExpanded(false)}\n                    aria-label={selectors.components.Drawer.General.contract}\n                  />\n                )}\n                <IconButton\n                  name=\"times\"\n                  size=\"xl\"\n                  onClick={onClose}\n                  aria-label={selectors.components.Drawer.General.close}\n                />\n              </div>\n              <div className={drawerStyles.titleWrapper}>\n                <h3 {...titleProps}>{title}</h3>\n                {typeof subtitle === 'string' && <div className=\"muted\">{subtitle}</div>}\n                {typeof subtitle !== 'string' && subtitle}\n                {tabs && <div className={drawerStyles.tabsWrapper}>{tabs}</div>}\n              </div>\n            </div>\n          )}\n          {typeof title !== 'string' && title}\n          <div className={drawerStyles.contentScroll}>\n            {!scrollableContent ? content : <CustomScrollbar autoHeightMin=\"100%\">{content}</CustomScrollbar>}\n          </div>\n        </div>\n      </FocusScope>\n    </RcDrawer>\n  );\n}\n\nconst getStyles = (theme: GrafanaTheme2) => {\n  return {\n    container: css`\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      flex: 1 1 0;\n    `,\n    drawer: css`\n      .rc-drawer-content-wrapper {\n        box-shadow: ${theme.shadows.z3};\n\n        ${theme.breakpoints.down('sm')} {\n          width: 100% !important;\n        }\n      }\n    `,\n    drawerContent: css`\n      background-color: ${theme.colors.background.primary} !important;\n      display: flex;\n      flex-direction: column;\n      overflow: hidden;\n      z-index: ${theme.zIndex.dropdown};\n    `,\n    drawerMotion: css`\n      &-appear {\n        transform: translateX(100%);\n        transition: none !important;\n\n        &-active {\n          transition: ${theme.transitions.create('transform')} !important;\n          transform: translateX(0);\n        }\n      }\n    `,\n    mask: css`\n      background-color: ${theme.components.overlay.background} !important;\n      backdrop-filter: blur(1px);\n    `,\n    maskMotion: css`\n      &-appear {\n        opacity: 0;\n\n        &-active {\n          opacity: 1;\n          transition: ${theme.transitions.create('opacity')};\n        }\n      }\n    `,\n    header: css`\n      background-color: ${theme.colors.background.canvas};\n      flex-grow: 0;\n      padding-top: ${theme.spacing(0.5)};\n    `,\n    actions: css`\n      display: flex;\n      align-items: baseline;\n      justify-content: flex-end;\n    `,\n    titleWrapper: css`\n      margin-bottom: ${theme.spacing(3)};\n      padding: ${theme.spacing(0, 1, 0, 3)};\n      overflow-wrap: break-word;\n    `,\n    content: css({\n      padding: theme.spacing(2),\n      height: '100%',\n      flexGrow: 1,\n    }),\n    contentScroll: css({\n      minHeight: 0,\n      flex: 1,\n    }),\n    tabsWrapper: css({\n      paddingLeft: theme.spacing(2),\n      margin: theme.spacing(3, -1, -3, -3),\n    }),\n  };\n};\n"],"names":["React"],"mappings":"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"}