{"version":3,"file":"FilterList.js","sources":["../../../../src/components/Table/FilterList.tsx"],"sourcesContent":["import { css } from '@emotion/css';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { FixedSizeList as List } from 'react-window';\n\nimport { GrafanaTheme2, SelectableValue } from '@grafana/data';\n\nimport { Checkbox, FilterInput, Label, VerticalGroup } from '..';\nimport { stylesFactory, useTheme2 } from '../../themes';\n\ninterface Props {\n  values: SelectableValue[];\n  options: SelectableValue[];\n  onChange: (options: SelectableValue[]) => void;\n  caseSensitive?: boolean;\n}\n\nconst ITEM_HEIGHT = 28;\nconst MIN_HEIGHT = ITEM_HEIGHT * 5;\n\nexport const FilterList = ({ options, values, caseSensitive, onChange }: Props) => {\n  const theme = useTheme2();\n  const styles = getStyles(theme);\n  const [searchFilter, setSearchFilter] = useState('');\n  const regex = useMemo(() => new RegExp(searchFilter, caseSensitive ? undefined : 'i'), [searchFilter, caseSensitive]);\n  const items = useMemo(\n    () =>\n      options.filter((option) => {\n        if (option.label === undefined) {\n          return false;\n        }\n        return regex.test(option.label);\n      }),\n    [options, regex]\n  );\n  const gutter = theme.spacing.gridSize;\n  const height = useMemo(() => Math.min(items.length * ITEM_HEIGHT, MIN_HEIGHT) + gutter, [gutter, items.length]);\n\n  const onInputChange = useCallback(\n    (v: string) => {\n      setSearchFilter(v);\n    },\n    [setSearchFilter]\n  );\n\n  const onCheckedChanged = useCallback(\n    (option: SelectableValue) => (event: React.FormEvent<HTMLInputElement>) => {\n      const newValues = event.currentTarget.checked\n        ? values.concat(option)\n        : values.filter((c) => c.value !== option.value);\n\n      onChange(newValues);\n    },\n    [onChange, values]\n  );\n\n  return (\n    <VerticalGroup spacing=\"md\">\n      <FilterInput placeholder=\"Filter values\" onChange={onInputChange} value={searchFilter} />\n      {!items.length && <Label>No values</Label>}\n      {items.length && (\n        <List\n          height={height}\n          itemCount={items.length}\n          itemSize={ITEM_HEIGHT}\n          width=\"100%\"\n          className={styles.filterList}\n        >\n          {({ index, style }) => {\n            const option = items[index];\n            const { value, label } = option;\n            const isChecked = values.find((s) => s.value === value) !== undefined;\n\n            return (\n              <div className={styles.filterListRow} style={style} title={label}>\n                <Checkbox value={isChecked} label={label} onChange={onCheckedChanged(option)} />\n              </div>\n            );\n          }}\n        </List>\n      )}\n    </VerticalGroup>\n  );\n};\n\nconst getStyles = stylesFactory((theme: GrafanaTheme2) => ({\n  filterList: css`\n    label: filterList;\n  `,\n  filterListRow: css`\n    label: filterListRow;\n    cursor: pointer;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    padding: ${theme.spacing(0.5)};\n\n    :hover {\n      background-color: ${theme.colors.action.hover};\n    }\n  `,\n}));\n"],"names":["React","List"],"mappings":"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"}