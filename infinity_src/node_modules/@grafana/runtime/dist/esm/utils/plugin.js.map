{"version":3,"file":"plugin.js","sources":["../../../src/utils/plugin.ts"],"sourcesContent":["// @ts-ignore\nimport System from 'systemjs/dist/system.js';\n\nimport { PanelPlugin } from '@grafana/data';\n\nimport { config } from '../config';\n\n// @ts-ignore\n\n/**\n * Option to specify a plugin css that should be applied for the dark\n * and the light theme.\n *\n * @public\n */\nexport interface PluginCssOptions {\n  light: string;\n  dark: string;\n}\n\n/**\n * @internal\n */\nexport const SystemJS = System;\n\n/**\n * Use this to load css for a Grafana plugin by specifying a {@link PluginCssOptions}\n * containing styling for the dark and the light theme.\n *\n * @param options - plugin styling for light and dark theme.\n * @public\n */\nexport function loadPluginCss(options: PluginCssOptions): Promise<any> {\n  const theme = config.bootData.user.lightTheme ? options.light : options.dark;\n  return SystemJS.import(`${theme}!css`);\n}\n\ninterface PluginImportUtils {\n  importPanelPlugin: (id: string) => Promise<PanelPlugin>;\n  getPanelPluginFromCache: (id: string) => PanelPlugin | undefined;\n}\n\nlet pluginImportUtils: PluginImportUtils | undefined;\n\nexport function setPluginImportUtils(utils: PluginImportUtils) {\n  if (pluginImportUtils) {\n    throw new Error('pluginImportUtils should only be set once, when Grafana is starting.');\n  }\n\n  pluginImportUtils = utils;\n}\n\nexport function getPluginImportUtils(): PluginImportUtils {\n  if (!pluginImportUtils) {\n    throw new Error('pluginImportUtils can only be used after Grafana instance has started.');\n  }\n\n  return pluginImportUtils;\n}\n"],"names":[],"mappings":";;;AAuBO,MAAM,QAAW,GAAA,OAAA;AASjB,SAAS,cAAc,OAAyC,EAAA;AACrE,EAAA,MAAM,QAAQ,MAAO,CAAA,QAAA,CAAS,KAAK,UAAa,GAAA,OAAA,CAAQ,QAAQ,OAAQ,CAAA,IAAA,CAAA;AACxE,EAAO,OAAA,QAAA,CAAS,MAAO,CAAA,CAAA,EAAG,KAAW,CAAA,IAAA,CAAA,CAAA,CAAA;AACvC,CAAA;AAOA,IAAI,iBAAA,CAAA;AAEG,SAAS,qBAAqB,KAA0B,EAAA;AAC7D,EAAA,IAAI,iBAAmB,EAAA;AACrB,IAAM,MAAA,IAAI,MAAM,sEAAsE,CAAA,CAAA;AAAA,GACxF;AAEA,EAAoB,iBAAA,GAAA,KAAA,CAAA;AACtB,CAAA;AAEO,SAAS,oBAA0C,GAAA;AACxD,EAAA,IAAI,CAAC,iBAAmB,EAAA;AACtB,IAAM,MAAA,IAAI,MAAM,wEAAwE,CAAA,CAAA;AAAA,GAC1F;AAEA,EAAO,OAAA,iBAAA,CAAA;AACT;;;;"}