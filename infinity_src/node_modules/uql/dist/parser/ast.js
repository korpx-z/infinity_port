"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getAST = void 0;
var _a = require("@yesoreyeram/nearley"), Parser = _a.Parser, Grammar = _a.Grammar;
var grammar_1 = require("../grammar/grammar");
var uqlGrammar = Grammar.fromCompiled(grammar_1.default);
var getAST = function (input) {
    if (input === void 0) { input = "hello"; }
    var uqlParser = new Parser(uqlGrammar);
    uqlParser.feed(input.trim() || "hello");
    var commands = (uqlParser === null || uqlParser === void 0 ? void 0 : uqlParser.results) || [];
    return new Promise(function (resolve, reject) {
        if (commands.length === 0) {
            reject("failed to parse query. no results found");
        }
        else {
            resolve(commands[0]);
        }
    });
};
exports.getAST = getAST;
